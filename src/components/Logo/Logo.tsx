import React, { useEffect, useRef, useState } from "react";

import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/utils";

const logoVariants = cva("", {
  variants: {
    variant: {
      default: "[&_path]:text-white [&_text]:text-white [&_rect]:fill-black ",
      muted:
        "[&_path]:text-muted-foreground/50 [&_text]:text-muted-foreground/50 [&_rect]:fill-muted",
    },
    size: {
      default: "w-full h-24",
      sm: "",
      lg: "",
    },
  },
  defaultVariants: {
    variant: "default",
    size: "default",
  },
});

export interface LogoProps
  extends React.SVGAttributes<SVGElement>,
    VariantProps<typeof logoVariants> {
  text: string;
}

const Logo = ({ variant, size, className, text, ...props }: LogoProps) => {
  const [textWidth, setTextWidth] = useState(0);
  const textRef = useRef<SVGTextElement>(null);

  useEffect(() => {
    if (textRef.current) {
      const bbox = textRef.current.getBBox();
      setTextWidth(bbox.width);
    }
  }, [text]);
  return (
    <svg
      width="100%"
      className={cn(logoVariants({ size, variant, className }), className)}
      viewBox={`0 0 ${textWidth + 65} 46`}
    >
      <rect x="0" y="0" width="100%" height="100%" rx="24" ry="24" />
      <g transform="translate(16, 0)" width="100%" height="100%">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="26"
          height="26"
          y="23%"
          viewBox="0 0 30 29"
          fill="none"
        >
          <path
            d="M2.50244 3.40629C4.39071 3.40283 6.27897 3.40001 8.16724 3.39836C9.04412 3.39758 9.921 3.3965 10.7979 3.39475C11.5627 3.39322 12.3276 3.39223 13.0925 3.39189C13.4969 3.3917 13.9014 3.39123 14.3059 3.39011C14.6877 3.38906 15.0695 3.38876 15.4514 3.38898C15.5904 3.38894 15.7295 3.38864 15.8685 3.38805C17.0775 3.38315 18.2807 3.45444 19.4643 3.72189C19.5721 3.74619 19.5721 3.74619 19.6821 3.77098C21.4089 4.18391 22.9485 5.03707 24.3219 6.1606C24.383 6.20942 24.4441 6.25824 24.5071 6.30854C24.9326 6.66517 25.2604 7.09949 25.601 7.53775C25.6523 7.5993 25.7036 7.66084 25.7565 7.72424C27.6829 10.055 28.19 13.3615 27.9569 16.3075C27.7411 18.7261 26.8392 20.9127 25.3 22.763C25.2357 22.8458 25.1715 22.9287 25.1072 23.0116C24.8656 23.2888 24.6031 23.5227 24.3219 23.7576C24.2513 23.8169 24.1807 23.8763 24.108 23.9375C21.6148 25.9861 18.6074 26.5211 15.4845 26.5274C15.3762 26.5277 15.3762 26.5277 15.2656 26.5281C14.8844 26.5292 14.5032 26.5299 14.122 26.5303C13.7298 26.5307 13.3376 26.5325 12.9454 26.5347C12.6419 26.5361 12.3385 26.5365 12.0351 26.5366C11.8905 26.5369 11.7458 26.5375 11.6012 26.5385C11.3991 26.5398 11.197 26.5396 10.9949 26.5392C10.936 26.5399 10.877 26.5406 10.8163 26.5413C10.361 26.5378 9.93658 26.4573 9.5732 26.1562C9.52286 26.0908 9.52286 26.0908 9.47151 26.0241C9.43678 25.9809 9.40206 25.9377 9.36629 25.8932C9.13727 25.5298 9.10159 25.2001 9.1034 24.7763C9.10306 24.7177 9.10272 24.659 9.10237 24.5986C9.10142 24.4025 9.10154 24.2063 9.10166 24.0102C9.10121 23.8694 9.1007 23.7286 9.10013 23.5879C9.0988 23.2056 9.09845 22.8234 9.09835 22.4412C9.09825 22.2023 9.09793 21.9634 9.09753 21.7245C9.09614 20.8909 9.09552 20.0573 9.09564 19.2237C9.09573 18.447 9.09414 17.6703 9.09176 16.8937C9.0898 16.2266 9.08899 15.5595 9.08909 14.8923C9.08913 14.494 9.0887 14.0957 9.0871 13.6974C9.08565 13.3227 9.08564 12.948 9.08673 12.5733C9.08689 12.436 9.08653 12.2987 9.08562 12.1614C9.08446 11.9735 9.08516 11.7856 9.08632 11.5977C9.08555 11.5438 9.08477 11.4899 9.08397 11.4343C9.09011 10.9816 9.22857 10.5795 9.53604 10.2485C9.88906 9.93769 10.1465 9.90003 10.601 9.90205C10.7476 9.90242 10.7476 9.90242 10.8971 9.9028C11.0003 9.90343 11.1035 9.90408 11.2067 9.90474C11.3108 9.90512 11.4149 9.90547 11.519 9.90578C11.7739 9.90669 12.0287 9.90795 12.2836 9.90952C12.2837 9.97362 12.2838 10.0377 12.2839 10.1038C12.2867 11.6644 12.2911 13.2251 12.2974 14.7857C12.3004 15.5405 12.3029 16.2952 12.304 17.0499C12.305 17.7078 12.307 18.3658 12.3103 19.0237C12.312 19.3719 12.3131 19.7202 12.3131 20.0685C12.313 20.3965 12.3144 20.7246 12.3168 21.0526C12.3174 21.1728 12.3175 21.2929 12.3171 21.4131C12.3131 22.2861 12.3131 22.2861 12.6598 23.069C12.969 23.3681 13.2061 23.4602 13.6271 23.4651C13.7016 23.4661 13.7761 23.467 13.8528 23.4681C13.9337 23.4686 14.0145 23.4692 14.0979 23.4698C14.1821 23.4704 14.2664 23.471 14.3532 23.4716C14.5326 23.4727 14.7121 23.4735 14.8915 23.4741C15.0721 23.475 15.2526 23.4765 15.4332 23.4788C18.0995 23.5126 20.5603 22.958 22.5564 21.0499C24.1315 19.3543 24.8339 17.0299 24.7922 14.7233C24.6669 12.7278 24.1712 10.8547 22.8924 9.29745C22.8472 9.23818 22.802 9.1789 22.7554 9.11784C21.4329 7.46743 19.2505 6.73433 17.2494 6.46663C16.7363 6.4205 16.2225 6.42326 15.7078 6.42487C15.5622 6.4242 15.4167 6.42339 15.2712 6.42247C14.882 6.42037 14.4929 6.42008 14.1037 6.42015C13.6948 6.41991 13.2859 6.41795 12.8771 6.41618C12.1054 6.41309 11.3338 6.41152 10.5621 6.41052C9.68254 6.4093 8.80294 6.40636 7.92333 6.40328C6.11637 6.397 4.30941 6.39307 2.50244 6.39013C2.50244 5.40546 2.50244 4.42079 2.50244 3.40629Z"
            fill="currentColor"
          />
          <path
            d="M2.50293 7.23172C4.38859 7.22454 6.27425 7.21916 8.15992 7.21586C9.03562 7.21429 9.91132 7.21215 10.787 7.20863C11.5509 7.20556 12.3149 7.2036 13.0788 7.20292C13.4827 7.20253 13.8866 7.2016 14.2904 7.19936C14.6719 7.19726 15.0534 7.19665 15.4348 7.1971C15.5736 7.19702 15.7123 7.19643 15.8511 7.19523C18.1587 7.17644 20.2974 7.80108 21.99 9.45046C22.2325 9.71955 22.4533 9.99901 22.6671 10.2921C22.7079 10.3459 22.7486 10.3998 22.7906 10.4552C24.0194 12.1849 24.2582 14.6059 23.9597 16.6616C23.6285 18.5499 22.6442 20.2931 21.1106 21.4336C19.3602 22.6129 17.5513 22.9598 15.4779 22.9501C15.2619 22.9494 15.0459 22.9517 14.8299 22.9541C14.6908 22.9542 14.5516 22.9542 14.4125 22.9539C14.317 22.9552 14.317 22.9552 14.2194 22.9565C13.8159 22.9517 13.5771 22.8902 13.2622 22.6099C12.9784 22.2742 13.0096 21.9351 13.0224 21.5149C13.0234 21.451 13.0244 21.387 13.0254 21.3211C13.0281 21.1641 13.0321 21.0072 13.0365 20.8502C13.0836 20.85 13.1307 20.8497 13.1792 20.8494C13.6762 20.8462 14.173 20.8408 14.6699 20.8344C14.8546 20.8322 15.0393 20.8306 15.2239 20.8295C17.1406 20.821 17.1406 20.821 18.9334 20.1856C18.9825 20.1593 19.0316 20.1331 19.0822 20.106C20.3754 19.3902 21.1596 18.2562 21.5997 16.8431C22.0339 15.3284 21.8219 13.5367 21.1623 12.1283C21.0043 11.8572 20.8281 11.6099 20.6357 11.3632C20.5973 11.3107 20.5588 11.2582 20.5193 11.2042C19.6905 10.1444 18.3193 9.5379 17.0242 9.37396C16.8074 9.35985 16.5906 9.35441 16.3735 9.34975C16.3072 9.34814 16.2409 9.34654 16.1726 9.34489C15.9454 9.3397 15.7183 9.33521 15.4912 9.33092C15.3716 9.3286 15.3716 9.3286 15.2496 9.32624C13.4159 9.29234 11.5819 9.28433 9.74791 9.27976C9.41327 9.27891 9.07864 9.27754 8.74401 9.27574C8.34364 9.27364 7.94327 9.27271 7.54289 9.27265C7.39314 9.27245 7.24339 9.27185 7.09364 9.27085C6.8866 9.26955 6.67962 9.26968 6.47258 9.27018C6.4121 9.26947 6.35162 9.26877 6.28931 9.26804C5.92797 9.27077 5.66712 9.30925 5.36203 9.52697C5.15491 9.87031 5.10725 10.1323 5.10345 10.5321C5.10265 10.5853 5.10184 10.6385 5.10101 10.6933C5.09858 10.8706 5.09773 11.0478 5.09687 11.2251C5.09545 11.3525 5.09393 11.48 5.09232 11.6074C5.08824 11.9528 5.08552 12.2981 5.08304 12.6435C5.08021 13.0047 5.07614 13.3658 5.0722 13.727C5.06493 14.4106 5.05878 15.0942 5.05303 15.7779C5.04644 16.5563 5.03859 17.3347 5.03064 18.1131C5.01431 19.714 4.99955 21.315 4.98583 22.916C4.70526 22.9227 4.42471 22.9267 4.14409 22.9303C4.0647 22.9322 3.98532 22.9342 3.90353 22.9361C3.78823 22.9373 3.78823 22.9373 3.67061 22.9384C3.60008 22.9396 3.52955 22.9408 3.45688 22.942C3.11956 22.8984 2.92843 22.7436 2.70799 22.4882C2.53791 22.1465 2.53291 21.8747 2.53248 21.4968C2.53125 21.4231 2.53001 21.3495 2.52874 21.2736C2.52502 21.0254 2.5235 20.7772 2.52203 20.529C2.51994 20.3498 2.51775 20.1705 2.51548 19.9913C2.50859 19.385 2.5054 18.7788 2.50293 18.1724C2.50269 18.1182 2.50246 18.0639 2.50222 18.008C2.49507 16.3412 2.49519 14.6744 2.49751 13.0076C2.49837 12.3754 2.49877 11.7433 2.49914 11.1112C2.49991 9.81804 2.50122 8.52488 2.50293 7.23172Z"
            fill="currentColor"
          />
          <path
            d="M7.61891 9.96451C7.99202 10.1677 8.23733 10.4198 8.37101 10.8276C8.37802 11.0118 8.38082 11.1938 8.38006 11.378C8.38013 11.4345 8.38019 11.4909 8.38026 11.549C8.38038 11.7387 8.37997 11.9283 8.37955 12.1179C8.37953 12.2536 8.37955 12.3893 8.37959 12.525C8.37961 12.8939 8.37917 13.2628 8.37864 13.6318C8.37817 14.0171 8.37813 14.4025 8.37804 14.7879C8.3778 15.5178 8.37719 16.2478 8.37643 16.9778C8.37559 17.8087 8.37518 18.6396 8.3748 19.4706C8.37401 21.1801 8.37269 22.8896 8.37101 24.5992C8.21566 24.3915 8.07975 24.182 7.94779 23.9584C7.5909 23.4122 7.03577 23.0779 6.41478 22.916C6.23933 22.8897 6.06377 22.8642 5.88811 22.8395C5.88108 21.2713 5.87577 19.7031 5.87251 18.1349C5.87096 17.4067 5.86885 16.6786 5.8654 15.9504C5.8624 15.3158 5.86046 14.6811 5.85979 14.0465C5.8594 13.7104 5.85848 13.3744 5.85629 13.0384C5.85424 12.722 5.85361 12.4056 5.85407 12.0892C5.85398 11.9732 5.85339 11.8572 5.85223 11.7412C5.85073 11.5825 5.85109 11.4239 5.85191 11.2652C5.85164 11.1765 5.85136 11.0878 5.85107 10.9964C5.90956 10.609 6.10081 10.373 6.38187 10.1151C6.74506 9.85945 7.20131 9.8122 7.61891 9.96451Z"
            fill="currentColor"
          />
        </svg>
        <text
          ref={textRef}
          y="54.5%"
          x={24 + 8} // Ширина логотипа + расстояние
          dominantBaseline="middle"
          textAnchor="start"
          fontSize="16"
          fill="currentColor"
          fontWeight={800}
        >
          {text}
        </text>
      </g>
    </svg>
  );
};

export { Logo };
